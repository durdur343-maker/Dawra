<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª - Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£ØºØ°ÙŠØ© ÙˆØ§Ù„ØªÙ‚Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø­ÙŠØ§Ø¦ÙŠØ©</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        
        .main-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px 0;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .admin-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
        }
        
        .admin-btn:hover {
            background: white;
            color: #1e3c72;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,255,255,0.3);
        }
        
        .admin-panel {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px solid #1e3c72;
            display: none;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .search-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            margin-bottom: 25px;
        }
        
        .results-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .alert-card {
            background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(255, 154, 0, 0.2);
            margin-bottom: 20px;
        }
        
        .yesterday-card {
            background: linear-gradient(135deg, #f0f4f8 0%, #e6ecf5 100%);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(108, 117, 125, 0.2);
            margin-bottom: 20px;
        }
        
        .btn-primary-custom {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            color: white;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }
        
        .btn-print-custom {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-print-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 62, 80, 0.4);
        }
        
        .participant-row {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s;
        }
        
        .participant-row:nth-child(even) {
            background: #f8f9fa;
        }
        
        .participant-row:hover {
            background: #e9ecef;
            transform: translateX(-5px);
        }
        
        .result-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 15px;
        }
        
        .alert-item {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            border-right: 5px solid #ff9a3c;
            transition: all 0.3s;
        }
        
        .alert-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 154, 60, 0.3);
        }
        
        .yesterday-item {
            background: white;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 10px;
            border-right: 5px solid #6c757d;
            transition: all 0.3s;
        }
        
        .yesterday-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }
        
        .alert-icon {
            width: 40px;
            height: 40px;
            background: #ff9a3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .yesterday-icon {
            width: 35px;
            height: 35px;
            background: #6c757d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .course-badge {
            background: rgba(30, 60, 114, 0.1);
            color: #1e3c72;
            padding: 5px 12px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }
        
        .location-badge {
            background: rgba(52, 152, 219, 0.1);
            color: #2980b9;
            padding: 5px 12px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }
        
        .duration-badge {
            background: rgba(142, 68, 173, 0.1);
            color: #8e44ad;
            padding: 5px 12px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 500;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #6c757d;
        }
        
        .loader {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #1e3c72;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .images-container {
            display: flex;
            gap: 5px;
            margin-top: 5px;
            flex-wrap: wrap;
        }
        
        .image-item {
            width: 50px;
            height: 50px;
            border: 2px solid #1e3c72;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .image-item:hover {
            transform: scale(1.1);
            border-color: #ff9a3c;
        }
        
        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .no-image-box {
            width: 50px;
            height: 50px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            color: #999;
            font-size: 10px;
            text-align: center;
        }
        
        .participant-name {
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .date-display {
            font-family: monospace;
            background: #f8f9fa;
            padding: 3px 8px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
            display: inline-block;
        }
        
        .stats-number {
            font-size: 24px;
            font-weight: bold;
            color: #1e3c72;
        }
        
        .column-header {
            font-weight: bold;
            padding: 10px 15px;
            background: #f8f9fa;
            border-bottom: 2px solid #1e3c72;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-right: 5px solid #dc3545;
        }
        
        .admin-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .save-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .save-btn:hover {
            background: #2a5298;
            transform: translateY(-2px);
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .delete-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
        }
        
        .password-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #1e3c72;
            border-radius: 10px;
            font-size: 16px;
        }
        
        .admin-table {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 10px;
        }
        
        .date-example {
            font-size: 12px;
            color: #6c757d;
            margin-top: 2px;
        }
        
        #currentDateDisplay, #currentTimeDisplay {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <h4 class="mb-3"><i class="bi bi-lock"></i> Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h4>
            <input type="password" id="adminPassword" class="password-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (admin)">
            <div class="d-flex gap-2 mt-3">
                <button class="btn btn-primary-custom" onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
                <button class="btn btn-secondary" onclick="closePasswordModal()">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="main-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-6">
                        <button class="admin-btn" onclick="openPasswordModal()">
                            <i class="bi bi-gear"></i> Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                        </button>
                    </div>
                    <div class="col-6 text-start">
                        <div id="currentDateDisplay" class="mb-1"></div>
                        <div id="currentTimeDisplay"></div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 text-center">
                        <h1><i class="bi bi-mortarboard"></i> Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙˆØ±Ø´</h1>
                        <h4>Ù‚Ø³Ù… Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£ØºØ°ÙŠØ© ÙˆØ§Ù„ØªÙ‚Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø­ÙŠØ§Ø¦ÙŠØ©</h4>
                    </div>
                </div>
            </div>
        </header>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
        <div id="adminPanel" class="admin-panel">
            <div class="admin-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0"><i class="bi bi-gear-fill"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†</h4>
                <div>
                    <button class="btn btn-light me-2" onclick="showAllCandidates()">
                        <i class="bi bi-people"></i> Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ†
                    </button>
                    <button class="btn btn-light" onclick="showAddForm()">
                        <i class="bi bi-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø´Ø­
                    </button>
                </div>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ† -->
            <div id="candidatesList" style="display: none;">
                <div class="admin-table mt-3">
                    <table class="table table-bordered table-striped mb-0">
                        <thead class="table-dark">
                            <tr>
                                <th>#</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø´Ø­</th>
                                <th>Ø§Ù„Ø¯ÙˆØ±Ø©</th>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©</th>
                                <th>Ø§Ù„Ù…Ø¯Ø©</th>
                                <th>ØµÙˆØ±Ø© 1</th>
                                <th>ØµÙˆØ±Ø© 2</th>
                                <th>ØµÙˆØ±Ø© 3</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="candidatesListContainer">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø´Ø­ -->
            <div id="addForm" style="display: none;" class="add-form mt-3">
                <h5><i class="bi bi-person-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø´Ø­ Ø¬Ø¯ÙŠØ¯</h5>
                <div class="row">
                    <div class="col-md-4">
                        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø´Ø­ <span class="text-danger">*</span></label>
                        <input type="text" id="newName" class="admin-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø´Ø­">
                    </div>
                    <div class="col-md-4">
                        <label>Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© <span class="text-danger">*</span></label>
                        <input type="text" id="newCourse" class="admin-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©">
                    </div>
                    <div class="col-md-4">
                        <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙˆØ±Ø©</label>
                        <input type="text" id="newDate" class="admin-input" placeholder="Ù…Ø«Ø§Ù„: 2026/02/17 Ø£Ùˆ 17/02/2026">
                        <div class="date-example">ÙŠØ¯Ø¹Ù…: 2026/02/17, 2026-02-17, 17/02/2026</div>
                    </div>
                    <div class="col-md-4">
                        <label>Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©</label>
                        <input type="text" id="newLocation" class="admin-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙƒØ§Ù†">
                    </div>
                    <div class="col-md-4">
                        <label>Ø§Ù„Ù…Ø¯Ø©</label>
                        <input type="text" id="newDuration" class="admin-input" placeholder="Ù…Ø«Ø§Ù„: ÙŠÙˆÙ…ÙŠÙ†">
                    </div>
                    <div class="col-md-4">
                        <label>ØµÙˆØ±Ø© 1</label>
                        <input type="text" id="newImage1" class="admin-input" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© 1">
                    </div>
                    <div class="col-md-4">
                        <label>ØµÙˆØ±Ø© 2</label>
                        <input type="text" id="newImage2" class="admin-input" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© 2">
                    </div>
                    <div class="col-md-4">
                        <label>ØµÙˆØ±Ø© 3</label>
                        <input type="text" id="newImage3" class="admin-input" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© 3">
                    </div>
                    <div class="col-12 mt-3">
                        <button class="save-btn" onclick="saveNewCandidate()">
                            <i class="bi bi-save"></i> Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø´ÙŠØª
                        </button>
                        <button class="btn btn-secondary" onclick="cancelAdd()">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ -->
        <div id="errorMessage" class="error-message" style="display: none;"></div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« -->
        <div class="search-card">
            <div class="card-body">
                <h4><i class="bi bi-search"></i> Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙˆØ±Ø´</h4>
                <div class="row mt-3">
                    <div class="col-md-10">
                        <input type="text" id="searchInput" class="form-control" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ Ù„Ù„Ø¨Ø­Ø«...">
                    </div>
                    <div class="col-md-2">
                        <button id="searchButton" class="btn btn-primary-custom">
                            <i class="bi bi-search"></i> Ø¨Ø­Ø«
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
        <div class="row">
            <div class="col-lg-8 mb-4">
                <div class="results-card">
                    <div class="result-header d-flex justify-content-between align-items-center">
                        <div>
                            <i class="bi bi-list-task"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
                            <span id="resultsCount" class="badge bg-light text-dark ms-2">0</span>
                        </div>
                        <button id="printButton" class="btn btn-print-custom btn-sm">
                            <i class="bi bi-printer"></i> Ø·Ø¨Ø§Ø¹Ø©
                        </button>
                    </div>
                    
                    <div class="column-header d-none d-md-block">
                        <div class="row">
                            <div class="col-md-1">Ù…</div>
                            <div class="col-md-3">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ ÙˆØ§Ù„ØµÙˆØ±</div>
                            <div class="col-md-2">Ø§Ù„Ø¯ÙˆØ±Ø©</div>
                            <div class="col-md-2">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                            <div class="col-md-2">Ø§Ù„Ù…Ø¯Ø©</div>
                            <div class="col-md-2">Ø§Ù„Ù…ÙƒØ§Ù†</div>
                        </div>
                    </div>
                    
                    <div id="participantsContainer">
                        <div class="empty-state">
                            <div class="loader mb-3"></div>
                            <h5>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø´ÙŠØª...</h5>
                            <p class="text-muted">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <!-- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØºØ¯ -->
                <div class="alert-card">
                    <div class="d-flex align-items-center mb-3">
                        <div class="alert-icon ms-2"><i class="bi bi-bell"></i></div>
                        <h4 class="mb-0">ğŸ“¢ Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØºØ¯</h4>
                    </div>
                    <div id="alertsContainer">
                        <div class="text-center py-4">
                            <div class="loader mb-2" style="width: 30px; height: 30px;"></div>
                            <p class="text-muted">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø£Ù…Ø³ -->
                <div class="yesterday-card">
                    <div class="d-flex align-items-center mb-3">
                        <div class="yesterday-icon ms-2"><i class="bi bi-calendar-check"></i></div>
                        <h5 class="mb-0">ğŸ“… Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø£Ù…Ø³</h5>
                    </div>
                    <div id="yesterdayContainer">
                        <div class="text-center py-3">
                            <div class="loader mb-2" style="width: 25px; height: 25px;"></div>
                            <p class="text-muted small">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
                <div class="card mt-4">
                    <div class="card-body">
                        <h6 class="mb-3"><i class="bi bi-graph-up"></i> Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h6>
                        <div class="row text-center">
                            <div class="col-6 mb-3">
                                <div class="stats-number" id="totalParticipants">0</div>
                                <div class="text-muted">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</div>
                            </div>
                            <div class="col-6 mb-3">
                                <div class="stats-number" id="totalCourses">0</div>
                                <div class="text-muted">Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª</div>
                            </div>
                            <div class="col-6">
                                <div class="stats-number" id="tomorrowCourses">0</div>
                                <div class="text-muted">Ø¯ÙˆØ±Ø§Øª ØºØ¯Ø§Ù‹</div>
                            </div>
                            <div class="col-6">
                                <div class="stats-number" id="averageDuration">0</div>
                                <div class="text-muted">Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø®ÙÙŠ -->
    <div id="printable-results" style="display: none;">
        <div style="padding: 20px;">
            <h2 style="text-align: center;">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙˆØ±Ø´</h2>
            <h4 style="text-align: center; color: #1e3c72;">Ù‚Ø³Ù… Ø¹Ù„ÙˆÙ… Ø§Ù„Ø£ØºØ°ÙŠØ© ÙˆØ§Ù„ØªÙ‚Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø­ÙŠØ§Ø¦ÙŠØ©</h4>
            <hr>
            <div id="printSearchDetails"></div>
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                <thead>
                    <tr style="background: #1e3c72; color: white;">
                        <th style="padding: 10px; border: 1px solid #dee2e6;">#</th>
                        <th style="padding: 10px; border: 1px solid #dee2e6;">Ø§Ù„Ø§Ø³Ù…</th>
                        <th style="padding: 10px; border: 1px solid #dee2e6;">Ø§Ù„Ø¯ÙˆØ±Ø©</th>
                        <th style="padding: 10px; border: 1px solid #dee2e6;">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th style="padding: 10px; border: 1px solid #dee2e6;">Ø§Ù„Ù…Ø¯Ø©</th>
                        <th style="padding: 10px; border: 1px solid #dee2e6;">Ø§Ù„Ù…ÙƒØ§Ù†</th>
                    </tr>
                </thead>
                <tbody id="printTableBody"></tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==================== Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙŠØ¯ ====================
        const API_URL = "https://script.google.com/macros/s/AKfycbycP1uRf61Xxbd_ANsPQxxBh9IvNaVdQbLkeV7TODpjWlFfnmTwykjDu3KmowKGrYVJ/exec";

        let allParticipants = [];
        let filteredParticipants = [];
        let currentSearchTerm = "";

        // ==================== Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø¹Ø±Ø¶ ====================
        function extractCorrectDate(dateString) {
            if (!dateString) return '';
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø´Ù‡Ø± ÙˆØ§Ù„ÙŠÙˆÙ… ÙÙ‚Ø· Ù…Ù† Ø£ÙŠ ØµÙŠØºØ©
            const match = dateString.match(/(\d{4})[\/-](\d{1,2})[\/-](\d{1,2})/);
            if (match) {
                const year = match[1];
                const month = match[2].padStart(2, '0');
                const day = match[3].padStart(2, '0');
                return `${year}/${month}/${day}`;
            }
            return dateString;
        }

        // ==================== Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ====================
        function openPasswordModal() {
            document.getElementById('passwordModal').style.display = 'flex';
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('adminPassword').value = '';
        }

        function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin') {
                closePasswordModal();
                document.getElementById('adminPanel').style.display = 'block';
                showAllCandidates();
            } else {
                alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØµØ­Ø­Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ… ====================
        function parseDate(dateString) {
            if (!dateString || dateString === '') return null;
            
            let cleanDate = dateString.toString().trim();
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·
            const numbers = cleanDate.match(/\d+/g);
            if (!numbers || numbers.length < 3) return null;
            
            // Ø§Ù„ØµÙŠØºØ© ÙÙŠ Ø§Ù„Ø´ÙŠØª: YYYY/MM/DD
            let year = parseInt(numbers[0]);
            let month = parseInt(numbers[1]);
            let day = parseInt(numbers[2]);
            
            console.log(`ğŸ” ØªØ§Ø±ÙŠØ® Ø®Ø§Ù…: ${cleanDate} -> ${year}/${month}/${day}`);
            
            // ØªØµØ­ÙŠØ­ Ø§Ù„Ø³Ù†Ø©
            if (year < 100) year = 2000 + year;
            
            // âœ… ØªØµØ­ÙŠØ­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨ØµÙŠØºØ© ISO (ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ T Ùˆ Z) - Ù†Ø¶ÙŠÙ ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯
            if (cleanDate.includes('T') && cleanDate.includes('Z')) {
                // Ù†Ø¶ÙŠÙ ÙŠÙˆÙ… ÙˆØ§Ø­Ø¯ Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©
                const correctedDate = new Date(year, month - 1, day, 12, 0, 0);
                correctedDate.setDate(correctedDate.getDate() + 1); // Ø¥Ø¶Ø§ÙØ© ÙŠÙˆÙ…
                console.log(`âœ… Ø¨Ø¹Ø¯ Ø§Ù„ØªØµØ­ÙŠØ­ (+1 ÙŠÙˆÙ…): ${correctedDate.getFullYear()}/${correctedDate.getMonth()+1}/${correctedDate.getDate()}`);
                return correctedDate;
            }
            
            // Ù„Ù„ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© Ø¨Ø¯ÙˆÙ† T Ùˆ Z
            return new Date(year, month - 1, day, 12, 0, 0);
        }

        function isCourseTomorrow(dateString) {
            const courseDate = parseDate(dateString);
            if (!courseDate) return false;
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 12, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            return courseDate.getDate() === tomorrow.getDate() &&
                   courseDate.getMonth() === tomorrow.getMonth() &&
                   courseDate.getFullYear() === tomorrow.getFullYear();
        }

        function isCourseYesterday(dateString) {
            const courseDate = parseDate(dateString);
            if (!courseDate) return false;
            
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 12, 0, 0);
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            return courseDate.getDate() === yesterday.getDate() &&
                   courseDate.getMonth() === yesterday.getMonth() &&
                   courseDate.getFullYear() === yesterday.getFullYear();
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================
        async function loadData() {
            try {
                console.log('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
                const response = await fetch(API_URL);
                const data = await response.json();
                console.log('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', data);
                
                if (Array.isArray(data)) {
                    allParticipants = data.map(item => ({
                        'Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ': item['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || item['Ø§Ù„Ø§Ø³Ù…'] || '',
                        'Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©': item['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || item['Ø§Ù„Ø¯ÙˆØ±Ø©'] || '',
                        'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯': item['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'] || item['Ø§Ù„ØªØ§Ø±ÙŠØ®'] || '',
                        'Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©': item['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || item['Ø§Ù„Ù…ÙƒØ§Ù†'] || '',
                        'Ø§Ù„Ù…Ø¯Ø©': item['Ø§Ù„Ù…Ø¯Ø©'] || item['Ù…Ø¯Ø© Ø§Ù„Ø¯ÙˆØ±Ø©'] || '',
                        'ØµÙˆØ±Ø© 1': item['ØµÙˆØ±Ø© 1'] || '',
                        'ØµÙˆØ±Ø© 2': item['ØµÙˆØ±Ø© 2'] || '',
                        'ØµÙˆØ±Ø© 3': item['ØµÙˆØ±Ø© 3'] || ''
                    }));
                }
                
                updateStatistics();
                displayAlerts();
                displayYesterdayCourses();
                
                document.getElementById('participantsContainer').innerHTML = `
                    <div class="empty-state">
                        <i class="bi bi-check-circle" style="font-size: 48px; color: #28a745;"></i>
                        <h5 class="mt-3">ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allParticipants.length} Ø³Ø¬Ù„ Ù…Ù† Ø§Ù„Ø´ÙŠØª</h5>
                        <p class="text-muted">Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ Ù„Ù„Ø¨Ø­Ø«</p>
                    </div>
                `;

            } catch (error) {
                console.error('Ø®Ø·Ø£:', error);
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('errorMessage').innerHTML = `
                    <i class="bi bi-exclamation-triangle"></i>
                    ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${error.message}
                    <button class="btn btn-sm btn-outline-danger me-3" onclick="loadData()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
                `;
            }
        }

        // ==================== Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ====================
        function updateStatistics() {
            document.getElementById('totalParticipants').textContent = allParticipants.length;
            
            const uniqueCourses = new Set(allParticipants.map(p => p['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©']).filter(c => c));
            document.getElementById('totalCourses').textContent = uniqueCourses.size;
            
            const tomorrowCount = allParticipants.filter(p => isCourseTomorrow(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])).length;
            document.getElementById('tomorrowCourses').textContent = tomorrowCount;
            
            let totalDays = 0, count = 0;
            allParticipants.forEach(p => {
                const match = (p['Ø§Ù„Ù…Ø¯Ø©'] || '').match(/\d+/);
                if (match) {
                    totalDays += parseInt(match[0]);
                    count++;
                }
            });
            const avg = count > 0 ? Math.round(totalDays / count) : 0;
            document.getElementById('averageDuration').textContent = avg > 0 ? avg + ' ÙŠÙˆÙ…' : '-';
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª (Ø¯ÙˆØ±Ø§Øª Ø§Ù„ØºØ¯) ====================
        function displayAlerts() {
            const container = document.getElementById('alertsContainer');
            
            const tomorrowCourses = allParticipants.filter(p => isCourseTomorrow(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯']));
            
            if (tomorrowCourses.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4">
                        <i class="bi bi-calendar-check" style="font-size: 40px; color: #6c757d;"></i>
                        <p class="mt-2">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª ØºØ¯Ø§Ù‹</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            tomorrowCourses.forEach(course => {
                html += `
                    <div class="alert-item">
                        <div class="d-flex">
                            <div class="alert-icon ms-2">
                                <i class="bi bi-bell"></i>
                            </div>
                            <div>
                                <div class="fw-bold mb-1">${course['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || 'Ø¯ÙˆØ±Ø©'}</div>
                                <div class="mb-1">
                                    <i class="bi bi-person"></i>
                                    <span>${course['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || 'Ù…Ø´Ø§Ø±Ùƒ'}</span>
                                </div>
                                <div class="small">
                                    <i class="bi bi-calendar"></i>
                                    <span>${extractCorrectDate(course['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])}</span>
                                    <span class="badge bg-warning text-dark ms-1">ØºØ¯Ø§Ù‹</span>
                                </div>
                                <div class="small mt-1">
                                    <i class="bi bi-geo-alt"></i> ${course['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || 'Ù„Ù… ÙŠØ­Ø¯Ø¯'}
                                </div>
                                ${course['Ø§Ù„Ù…Ø¯Ø©'] ? `<div class="small mt-1"><i class="bi bi-clock"></i> ${course['Ø§Ù„Ù…Ø¯Ø©']}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ==================== Ø¹Ø±Ø¶ Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø£Ù…Ø³ ====================
        function displayYesterdayCourses() {
            const container = document.getElementById('yesterdayContainer');
            
            const yesterdayCourses = allParticipants.filter(p => isCourseYesterday(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯']));
            
            if (yesterdayCourses.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-3">
                        <i class="bi bi-calendar-x" style="font-size: 30px; color: #6c757d;"></i>
                        <p class="mt-2 small">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª Ø£Ù…Ø³</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            yesterdayCourses.forEach(course => {
                html += `
                    <div class="yesterday-item">
                        <div class="d-flex">
                            <div class="yesterday-icon ms-2">
                                <i class="bi bi-calendar-check"></i>
                            </div>
                            <div>
                                <div class="fw-bold mb-1">${course['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || 'Ø¯ÙˆØ±Ø©'}</div>
                                <div class="mb-1">
                                    <i class="bi bi-person"></i>
                                    <span>${course['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || 'Ù…Ø´Ø§Ø±Ùƒ'}</span>
                                </div>
                                <div class="small">
                                    <i class="bi bi-calendar"></i>
                                    <span>${extractCorrectDate(course['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])}</span>
                                    <span class="badge bg-secondary ms-1">Ø£Ù…Ø³</span>
                                </div>
                                <div class="small text-muted">
                                    <i class="bi bi-geo-alt"></i> ${course['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || 'Ù„Ù… ÙŠØ­Ø¯Ø¯'}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø´Ø­ÙŠÙ† ====================
        function showAllCandidates() {
            document.getElementById('addForm').style.display = 'none';
            document.getElementById('candidatesList').style.display = 'block';
            
            const container = document.getElementById('candidatesListContainer');
            let html = '';
            
            if (allParticipants.length === 0) {
                html = '<tr><td colspan="10" class="text-center py-4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø´Ø­ÙŠÙ†</td></tr>';
            } else {
                allParticipants.forEach((p, index) => {
                    html += `
                        <tr>
                            <td>${index + 1}</td>
                            <td>${p['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || ''}</td>
                            <td>${p['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</td>
                            <td>${extractCorrectDate(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])}</td>
                            <td>${p['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</td>
                            <td>${p['Ø§Ù„Ù…Ø¯Ø©'] || ''}</td>
                            <td class="text-center">${p['ØµÙˆØ±Ø© 1'] ? 'âœ…' : 'âŒ'}</td>
                            <td class="text-center">${p['ØµÙˆØ±Ø© 2'] ? 'âœ…' : 'âŒ'}</td>
                            <td class="text-center">${p['ØµÙˆØ±Ø© 3'] ? 'âœ…' : 'âŒ'}</td>
                            <td>
                                <button class="delete-btn btn-sm" onclick="confirmDelete(${index + 2})">
                                    <i class="bi bi-trash"></i> Ø­Ø°Ù
                                </button>
                            </td>
                        </tr>
                    `;
                });
            }
            
            container.innerHTML = html;
        }

        // ==================== Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´ÙŠØª ====================
        async function saveNewCandidate() {
            const newCandidate = {
                'Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ': document.getElementById('newName').value.trim(),
                'Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©': document.getElementById('newCourse').value.trim(),
                'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯': document.getElementById('newDate').value.trim() || new Date().toLocaleDateString('en-GB'),
                'Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©': document.getElementById('newLocation').value.trim(),
                'Ø§Ù„Ù…Ø¯Ø©': document.getElementById('newDuration').value.trim(),
                'ØµÙˆØ±Ø© 1': document.getElementById('newImage1').value.trim(),
                'ØµÙˆØ±Ø© 2': document.getElementById('newImage2').value.trim(),
                'ØµÙˆØ±Ø© 3': document.getElementById('newImage3').value.trim()
            };
            
            if (!newCandidate['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || !newCandidate['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©']) {
                alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ ÙˆØ§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                return;
            }
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: "add",
                        data: newCandidate
                    })
                });
                
                alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†');
                
                document.getElementById('newName').value = '';
                document.getElementById('newCourse').value = '';
                document.getElementById('newDate').value = '';
                document.getElementById('newLocation').value = '';
                document.getElementById('newDuration').value = '';
                document.getElementById('newImage1').value = '';
                document.getElementById('newImage2').value = '';
                document.getElementById('newImage3').value = '';
                
                document.getElementById('addForm').style.display = 'none';
                
                setTimeout(() => {
                    loadData();
                    showAllCandidates();
                }, 3000);
                
            } catch (error) {
                console.error('Ø®Ø·Ø£:', error);
                alert('âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ù‚Ø¯ ØªØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©)');
            }
        }

        // ==================== Ø§Ù„Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø´ÙŠØª ====================
        async function confirmDelete(rowIndex) {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø±Ø´Ø­ Ù…Ù† Ø§Ù„Ø´ÙŠØªØŸ')) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            action: "delete",
                            rowIndex: rowIndex
                        })
                    });
                    
                    alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø­Ø°Ù. Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†');
                    
                    setTimeout(() => {
                        loadData();
                        showAllCandidates();
                    }, 3000);
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø£:', error);
                    alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ (Ù‚Ø¯ ØªØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©)');
                }
            }
        }

        function showAddForm() {
            document.getElementById('candidatesList').style.display = 'none';
            document.getElementById('addForm').style.display = 'block';
        }

        function cancelAdd() {
            document.getElementById('addForm').style.display = 'none';
        }

        // ==================== Ø§Ù„Ø¨Ø­Ø« ====================
        function searchParticipants() {
            currentSearchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (currentSearchTerm === '') {
                document.getElementById('participantsContainer').innerHTML = `
                    <div class="empty-state">
                        <i class="bi bi-search" style="font-size: 48px;"></i>
                        <h5 class="mt-3">Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ Ù„Ù„Ø¨Ø­Ø«</h5>
                    </div>
                `;
                document.getElementById('resultsCount').textContent = '0';
                return;
            }
            
            const filtered = allParticipants.filter(p => 
                (p['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || '').toLowerCase().includes(currentSearchTerm)
            );
            
            displayResults(filtered);
            document.getElementById('resultsCount').textContent = filtered.length;
        }

        // ==================== Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ====================
        function displayResults(participants) {
            const container = document.getElementById('participantsContainer');
            
            if (participants.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="bi bi-exclamation-circle" style="font-size: 48px;"></i>
                        <h5 class="mt-3">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</h5>
                        <p class="text-muted">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ "${currentSearchTerm}"</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            participants.forEach((p, index) => {
                html += `
                    <div class="participant-row">
                        <div class="row align-items-center">
                            <div class="col-md-1">${index + 1}</div>
                            <div class="col-md-3">
                                <div class="participant-name">${p['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || ''}</div>
                                <div class="images-container">
                                    ${displayImage(p['ØµÙˆØ±Ø© 1'])}
                                    ${displayImage(p['ØµÙˆØ±Ø© 2'])}
                                    ${displayImage(p['ØµÙˆØ±Ø© 3'])}
                                </div>
                            </div>
                            <div class="col-md-2"><span class="course-badge">${p['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</span></div>
                            <div class="col-md-2">${extractCorrectDate(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])}</div>
                            <div class="col-md-2"><span class="duration-badge">${p['Ø§Ù„Ù…Ø¯Ø©'] || ''}</span></div>
                            <div class="col-md-2"><span class="location-badge">${p['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</span></div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function displayImage(img) {
            if (img && img.trim() !== '') {
                return `<div class="image-item" onclick="window.open('${img}', '_blank')">
                    <img src="${img}" onerror="this.parentElement.innerHTML='<div class=\\'no-image-box\\'><i class=\\'bi bi-image\\'></i></div>'">
                </div>`;
            }
            return `<div class="no-image-box"><i class="bi bi-image"></i></div>`;
        }

        // ==================== Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª ====================
        function updateDateTime() {
            const now = new Date();
            const dateStr = `${now.getDate().toString().padStart(2,'0')}/${(now.getMonth()+1).toString().padStart(2,'0')}/${now.getFullYear()}`;
            const timeStr = `${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}`;
            document.getElementById('currentDateDisplay').innerHTML = `<i class="bi bi-calendar3"></i> Ø§Ù„ØªØ§Ø±ÙŠØ®: ${dateStr}`;
            document.getElementById('currentTimeDisplay').innerHTML = `<i class="bi bi-clock"></i> Ø§Ù„ÙˆÙ‚Øª: ${timeStr}`;
        }

        // ==================== Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ====================
        function setupPrinting() {
            document.getElementById('printButton').addEventListener('click', function() {
                const participantsToPrint = currentSearchTerm ? 
                    allParticipants.filter(p => (p['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || '').toLowerCase().includes(currentSearchTerm)) : 
                    allParticipants;
                
                if (participantsToPrint.length === 0) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©');
                    return;
                }
                
                const now = new Date();
                const dateStr = `${now.getDate()}/${now.getMonth()+1}/${now.getFullYear()}`;
                
                document.getElementById('printSearchDetails').innerHTML = `
                    <p><strong>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«:</strong> ${currentSearchTerm || 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†'}</p>
                    <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:</strong> ${dateStr}</p>
                    <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</strong> ${participantsToPrint.length}</p>
                `;
                
                let tableBody = '';
                participantsToPrint.forEach((p, i) => {
                    tableBody += `
                        <tr>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${i+1}</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${p['Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ'] || ''}</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${p['Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${extractCorrectDate(p['ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¹Ù‚Ø§Ø¯'])}</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${p['Ø§Ù„Ù…Ø¯Ø©'] || ''}</td>
                            <td style="padding: 8px; border: 1px solid #dee2e6;">${p['Ù…ÙƒØ§Ù† Ø§Ù„Ø¯ÙˆØ±Ø©'] || ''}</td>
                        </tr>
                    `;
                });
                
                document.getElementById('printTableBody').innerHTML = tableBody;
                
                const printContent = document.getElementById('printable-results').innerHTML;
                const originalContent = document.body.innerHTML;
                
                document.body.innerHTML = printContent;
                window.print();
                document.body.innerHTML = originalContent;
                window.location.reload();
            });
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            setInterval(updateDateTime, 1000);
            loadData();
            
            document.getElementById('searchButton').addEventListener('click', searchParticipants);
            document.getElementById('searchInput').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') searchParticipants();
            });
            
            setupPrinting();
        });
    </script>
</body>
</html>
